"use strict";function GetClassroomMonitor(n){$.ajax({type:"get",url:"/teacher/myclass/GetClassroomMonitor",cache:!1,data:{classindex:classindex},dataType:"JSON",success:function(t){var r,u,i;if(t=JSON.parse(t),t.Code=="404"&&t.OK.toString()=="false"){window.location.reload();return}for(r=t.result,u=require("teacher/lesson-watching"),$("#b-monitorlist").html(u(r)),lesson.init(),i=0;i<_groupArr.length;i++)$(".card-header[data-groupindex='"+_groupArr[i]+"']").click();n==1&&$(".card-header").eq(0).click();window.timer=setTimeout(GetClassroomMonitor,1e4)}})}function SaveClassEnd(){_groupArr=[];$.ajax({type:"POST",url:"/teacher/myclass/SaveClassEnd",cache:!1,data:{classindex:classindex},dataType:"JSON",success:function(){$("#btn-submit").off("click");$.router.load("/teacher/myclass/CourseReport?classindex="+classindex+"&classid="+classid,!0)}})}Array.prototype.removeByValue=function(n){for(var t=0;t<this.length;t++)if(this[t]==n){this.splice(t,1);break}};Array.prototype.isHaveValue=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return!0;return!1};var _groupArr=[],lesson={init:function(){$(".card-header").off("click");$(".card-header").on("click",function(){var t=$(this).parent(),i=$(this).attr("data-groupindex"),n;t.hasClass("slide-down")?(n=$(this).next(),$(n).hide(100),t.removeClass("slide-down").addClass("slide-up"),$(this).find(".icon-down-drop").removeClass("icon-down-drop").addClass("icon-right-drop"),_groupArr.removeByValue(i)):(n=$(this).next(),$(n).show(100),t.removeClass("slide-up").addClass("slide-down"),$(this).find(".icon-right-drop").removeClass("icon-right-drop").addClass("icon-down-drop"),_groupArr.isHaveValue(i)||_groupArr.push(i))})}},classindex,classid,timer={};$(function(){classindex=$("#hidden-classindex").text();classid=$("#hidden-classid").text();GetClassroomMonitor(1);$("#btn-submit").click(SaveClassEnd)});